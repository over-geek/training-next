module.exports=[93194,a=>{"use strict";a.s(["default",()=>at],93194);var b=a.i(87924),c=a.i(72131),d=a.i(87532),e=a.i(60246),f=a.i(70106);let g=(0,f.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),h=(0,f.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var i=a.i(96221),j=a.i(5522),k=a.i(3130),l=a.i(54161),m=a.i(87682),n=a.i(7706),o=a.i(50104),p=a.i(37738),q=a.i(70121),r=a.i(7554),s=a.i(25152),t=a.i(30553),u=a.i(72752),v=a.i(77192),w=a.i(92843),x="Collapsible",[y,z]=(0,o.createContextScope)(x),[A,B]=y(x),C=c.forwardRef((a,d)=>{let{__scopeCollapsible:e,open:f,defaultOpen:g,disabled:h,onOpenChange:i,...j}=a,[k,l]=(0,s.useControllableState)({prop:f,defaultProp:g??!1,onChange:i,caller:x});return(0,b.jsx)(A,{scope:e,disabled:h,contentId:(0,w.useId)(),open:k,onOpenToggle:c.useCallback(()=>l(a=>!a),[l]),children:(0,b.jsx)(t.Primitive.div,{"data-state":I(k),"data-disabled":h?"":void 0,...j,ref:d})})});C.displayName=x;var D="CollapsibleTrigger",E=c.forwardRef((a,c)=>{let{__scopeCollapsible:d,...e}=a,f=B(D,d);return(0,b.jsx)(t.Primitive.button,{type:"button","aria-controls":f.contentId,"aria-expanded":f.open||!1,"data-state":I(f.open),"data-disabled":f.disabled?"":void 0,disabled:f.disabled,...e,ref:c,onClick:(0,r.composeEventHandlers)(a.onClick,f.onOpenToggle)})});E.displayName=D;var F="CollapsibleContent",G=c.forwardRef((a,c)=>{let{forceMount:d,...e}=a,f=B(F,a.__scopeCollapsible);return(0,b.jsx)(v.Presence,{present:d||f.open,children:({present:a})=>(0,b.jsx)(H,{...e,ref:c,present:a})})});G.displayName=F;var H=c.forwardRef((a,d)=>{let{__scopeCollapsible:e,present:f,children:g,...h}=a,i=B(F,e),[j,k]=c.useState(f),l=c.useRef(null),m=(0,q.useComposedRefs)(d,l),n=c.useRef(0),o=n.current,p=c.useRef(0),r=p.current,s=i.open||j,v=c.useRef(s),w=c.useRef(void 0);return c.useEffect(()=>{let a=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,u.useLayoutEffect)(()=>{let a=l.current;if(a){w.current=w.current||{transitionDuration:a.style.transitionDuration,animationName:a.style.animationName},a.style.transitionDuration="0s",a.style.animationName="none";let b=a.getBoundingClientRect();n.current=b.height,p.current=b.width,v.current||(a.style.transitionDuration=w.current.transitionDuration,a.style.animationName=w.current.animationName),k(f)}},[i.open,f]),(0,b.jsx)(t.Primitive.div,{"data-state":I(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!s,...h,ref:m,style:{"--radix-collapsible-content-height":o?`${o}px`:void 0,"--radix-collapsible-content-width":r?`${r}px`:void 0,...a.style},children:s&&g})});function I(a){return a?"open":"closed"}var J=a.i(7827),K="Accordion",L=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[M,N,O]=(0,p.createCollection)(K),[P,Q]=(0,o.createContextScope)(K,[O,z]),R=z(),S=c.default.forwardRef((a,c)=>{let{type:d,...e}=a;return(0,b.jsx)(M.Provider,{scope:a.__scopeAccordion,children:"multiple"===d?(0,b.jsx)(Y,{...e,ref:c}):(0,b.jsx)(X,{...e,ref:c})})});S.displayName=K;var[T,U]=P(K),[V,W]=P(K,{collapsible:!1}),X=c.default.forwardRef((a,d)=>{let{value:e,defaultValue:f,onValueChange:g=()=>{},collapsible:h=!1,...i}=a,[j,k]=(0,s.useControllableState)({prop:e,defaultProp:f??"",onChange:g,caller:K});return(0,b.jsx)(T,{scope:a.__scopeAccordion,value:c.default.useMemo(()=>j?[j]:[],[j]),onItemOpen:k,onItemClose:c.default.useCallback(()=>h&&k(""),[h,k]),children:(0,b.jsx)(V,{scope:a.__scopeAccordion,collapsible:h,children:(0,b.jsx)(_,{...i,ref:d})})})}),Y=c.default.forwardRef((a,d)=>{let{value:e,defaultValue:f,onValueChange:g=()=>{},...h}=a,[i,j]=(0,s.useControllableState)({prop:e,defaultProp:f??[],onChange:g,caller:K}),k=c.default.useCallback(a=>j((b=[])=>[...b,a]),[j]),l=c.default.useCallback(a=>j((b=[])=>b.filter(b=>b!==a)),[j]);return(0,b.jsx)(T,{scope:a.__scopeAccordion,value:i,onItemOpen:k,onItemClose:l,children:(0,b.jsx)(V,{scope:a.__scopeAccordion,collapsible:!0,children:(0,b.jsx)(_,{...h,ref:d})})})}),[Z,$]=P(K),_=c.default.forwardRef((a,d)=>{let{__scopeAccordion:e,disabled:f,dir:g,orientation:h="vertical",...i}=a,j=c.default.useRef(null),k=(0,q.useComposedRefs)(j,d),l=N(e),m="ltr"===(0,J.useDirection)(g),n=(0,r.composeEventHandlers)(a.onKeyDown,a=>{if(!L.includes(a.key))return;let b=a.target,c=l().filter(a=>!a.ref.current?.disabled),d=c.findIndex(a=>a.ref.current===b),e=c.length;if(-1===d)return;a.preventDefault();let f=d,g=e-1,i=()=>{(f=d+1)>g&&(f=0)},j=()=>{(f=d-1)<0&&(f=g)};switch(a.key){case"Home":f=0;break;case"End":f=g;break;case"ArrowRight":"horizontal"===h&&(m?i():j());break;case"ArrowDown":"vertical"===h&&i();break;case"ArrowLeft":"horizontal"===h&&(m?j():i());break;case"ArrowUp":"vertical"===h&&j()}let k=f%e;c[k].ref.current?.focus()});return(0,b.jsx)(Z,{scope:e,disabled:f,direction:g,orientation:h,children:(0,b.jsx)(M.Slot,{scope:e,children:(0,b.jsx)(t.Primitive.div,{...i,"data-orientation":h,ref:k,onKeyDown:f?void 0:n})})})}),aa="AccordionItem",[ab,ac]=P(aa),ad=c.default.forwardRef((a,c)=>{let{__scopeAccordion:d,value:e,...f}=a,g=$(aa,d),h=U(aa,d),i=R(d),j=(0,w.useId)(),k=e&&h.value.includes(e)||!1,l=g.disabled||a.disabled;return(0,b.jsx)(ab,{scope:d,open:k,disabled:l,triggerId:j,children:(0,b.jsx)(C,{"data-orientation":g.orientation,"data-state":ak(k),...i,...f,ref:c,disabled:l,open:k,onOpenChange:a=>{a?h.onItemOpen(e):h.onItemClose(e)}})})});ad.displayName=aa;var ae="AccordionHeader",af=c.default.forwardRef((a,c)=>{let{__scopeAccordion:d,...e}=a,f=$(K,d),g=ac(ae,d);return(0,b.jsx)(t.Primitive.h3,{"data-orientation":f.orientation,"data-state":ak(g.open),"data-disabled":g.disabled?"":void 0,...e,ref:c})});af.displayName=ae;var ag="AccordionTrigger",ah=c.default.forwardRef((a,c)=>{let{__scopeAccordion:d,...e}=a,f=$(K,d),g=ac(ag,d),h=W(ag,d),i=R(d);return(0,b.jsx)(M.ItemSlot,{scope:d,children:(0,b.jsx)(E,{"aria-disabled":g.open&&!h.collapsible||void 0,"data-orientation":f.orientation,id:g.triggerId,...i,...e,ref:c})})});ah.displayName=ag;var ai="AccordionContent",aj=c.default.forwardRef((a,c)=>{let{__scopeAccordion:d,...e}=a,f=$(K,d),g=ac(ai,d),h=R(d);return(0,b.jsx)(G,{role:"region","aria-labelledby":g.triggerId,"data-orientation":f.orientation,...h,...e,ref:c,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...a.style}})});function ak(a){return a?"open":"closed"}aj.displayName=ai;var al=a.i(77991),am=a.i(97895);function an({...a}){return(0,b.jsx)(S,{"data-slot":"accordion",...a})}function ao({className:a,...c}){return(0,b.jsx)(ad,{"data-slot":"accordion-item",className:(0,am.cn)("border-b last:border-b-0",a),...c})}function ap({className:a,children:c,...d}){return(0,b.jsx)(af,{className:"flex",children:(0,b.jsxs)(ah,{"data-slot":"accordion-trigger",className:(0,am.cn)("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",a),...d,children:[c,(0,b.jsx)(al.ChevronDownIcon,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function aq({className:a,children:c,...d}){return(0,b.jsx)(aj,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...d,children:(0,b.jsx)("div",{className:(0,am.cn)("pt-0 pb-4",a),children:c})})}var ar=a.i(94697),as=a.i(23292);function at(){let[a,f]=(0,c.useState)(""),[o,p]=(0,c.useState)("All Departments"),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(["All Departments"]);(0,c.useEffect)(()=>{w()},[]);let w=async()=>{try{t(!0);let a=await ar.TrainingService.getUncompletedTrainings();r(a);let b=new Set;a.forEach(a=>{a.missingEmployees.forEach(a=>{b.add(a.department)})}),v(["All Departments",...Array.from(b).sort()])}catch(a){console.error("Failed to fetch uncompleted trainings:",a),as.toast.error("Failed to load missing trainings. Please try again.")}finally{t(!1)}},x=(0,c.useMemo)(()=>q.filter(b=>b.name.toLowerCase().includes(a.toLowerCase())),[a,q]),y=x.length,z=x.reduce((a,b)=>a+b.missingEmployees.length,0);return(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsx)("div",{className:"flex justify-between items-center",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Missing Trainings"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Track uncompleted trainings and employees who need to complete them"})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)(k.Card,{children:[(0,b.jsxs)(k.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(k.CardTitle,{className:"text-sm font-medium",children:"Incomplete Trainings"}),(0,b.jsx)(g,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(k.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:s?(0,b.jsx)(i.Loader2,{className:"h-6 w-6 animate-spin"}):y}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Trainings with incomplete progress"})]})]}),(0,b.jsxs)(k.Card,{children:[(0,b.jsxs)(k.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(k.CardTitle,{className:"text-sm font-medium",children:"Pending Employees"}),(0,b.jsx)(e.Users,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(k.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:s?(0,b.jsx)(i.Loader2,{className:"h-6 w-6 animate-spin"}):z}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Across all incomplete trainings"})]})]}),(0,b.jsxs)(k.Card,{children:[(0,b.jsxs)(k.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(k.CardTitle,{className:"text-sm font-medium",children:"Average Completion"}),(0,b.jsx)("div",{className:"h-4 w-4 rounded-full bg-yellow-500"})]}),(0,b.jsxs)(k.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:[s?(0,b.jsx)(i.Loader2,{className:"h-6 w-6 animate-spin"}):x.length>0?Math.round(x.reduce((a,b)=>a+b.completionRate,0)/x.length):0,"%"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Across all trainings"})]})]})]}),(0,b.jsx)(k.Card,{children:(0,b.jsx)(k.CardContent,{children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(d.Search,{className:"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(j.Input,{placeholder:"Search trainings by name...",value:a,onChange:a=>f(a.target.value),className:"pl-10"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)(m.Select,{value:o,onValueChange:p,children:[(0,b.jsx)(m.SelectTrigger,{className:"w-48",children:(0,b.jsx)(m.SelectValue,{placeholder:"Filter by department"})}),(0,b.jsx)(m.SelectContent,{children:u.map(a=>(0,b.jsx)(m.SelectItem,{value:a,children:a},a))})]})]})]})})}),(0,b.jsx)(k.Card,{children:(0,b.jsx)(k.CardContent,{children:s?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(i.Loader2,{className:"h-6 w-6 animate-spin"}),(0,b.jsx)("span",{className:"text-lg",children:"Loading missing trainings..."})]})}):(0,b.jsx)(an,{type:"multiple",className:"w-full",children:x.map(a=>{var c;let d="All Departments"===o?a.missingEmployees:a.missingEmployees.filter(a=>a.department===o),e=a.totalRequired-a.completed;return(0,b.jsxs)(ao,{value:`training-${a.id}`,children:[(0,b.jsx)(ap,{className:"hover:no-underline",children:(0,b.jsxs)("div",{className:"flex items-center justify-between w-full pr-4",children:[(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsx)("h3",{className:"text-lg font-semibold text-left",children:a.name})}),(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"text-lg font-bold",children:[Math.round(a.completionRate),"%"]}),(0,b.jsx)("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:(0,b.jsx)("div",{className:`h-2 rounded-full transition-all duration-300 ${(c=a.completionRate)>=80?"bg-green-500":c>=60?"bg-yellow-500":c>=40?"bg-orange-500":"bg-red-500"}`,style:{width:`${a.completionRate}%`}})})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e," people left"]}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:[a.completed,"/",a.totalRequired," completed"]})]})]})]})}),(0,b.jsx)(aq,{children:(0,b.jsxs)("div",{className:"pt-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsxs)("h4",{className:"font-semibold",children:["Employees who need to complete this training","All Departments"!==o&&(0,b.jsxs)("span",{className:"text-muted-foreground font-normal",children:[" (",o,")"]})]}),(0,b.jsxs)(l.Badge,{variant:"secondary",children:[d.length," employee",1!==d.length?"s":""]})]}),d.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:d.map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-muted/50 rounded-lg border",children:[(0,b.jsx)(n.Avatar,{name:a.name,className:"h-8 w-8"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-medium text-sm truncate",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.department})]})]},a.id))}):(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:["No employees from ",o," need to complete this training"]})]})})]},a.id)})})})}),!s&&0===x.length&&(0,b.jsx)(k.Card,{children:(0,b.jsxs)(k.CardContent,{className:"text-center py-12",children:[(0,b.jsx)(g,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No trainings found"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:a?"No trainings match your search criteria.":"All trainings are 100% complete!"})]})})]})}}];

//# sourceMappingURL=app_missing-trainings_page_tsx_16fd59fc._.js.map